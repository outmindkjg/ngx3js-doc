plugins {
  id 'java'
  id 'base'
  id 'com.moowork.node'
}

repositories {
  maven {
    url "https://plugins.gradle.org/m2/"
  }
}

 node {
  version = "${nodeVersion}"
  npmVersion = "${npmVersion}"
  download = false
}

def getPropertyValue = { key, val ->
    project.hasProperty(key) ? project.property(key).toString() : val
}

def profile = getPropertyValue("profile", "local")
println "profile [" + profile + "]"

task npm_run_build(type: NpmTask) {
    args = ['run', 'build-' + profile]
}

jar.dependsOn 'npm_run_build'

jar {
  from 'dist/nepsis-ui' into 'static'
}
